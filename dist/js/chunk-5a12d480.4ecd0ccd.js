(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a12d480"],{"0c71":function(e,t,a){},"26d3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"settings-page"}},[a("div",{staticClass:"settings-page-container"},[a("block-header-standard",{attrs:{title:e.t("settings")}}),a("div",{staticClass:"settings-form-container"},[a("settings-form")],1)],1)])},r=[],i=a("1d62"),o=a("087b"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"settings-form"}},[e.loading?a("white-spinner"):e._e(),e.user?a("form",{attrs:{"data-vv-scope":"settings"},on:{submit:function(t){return t.preventDefault(),e.updateSettings(t)}}},[e.returnedError.length?a("div",{staticClass:"registration-error"},[a("div",{staticClass:"error"},[a("span",[e._v(e._s(e.returnedError))])])]):e._e(),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-name"}},[e._v(e._s(e.t("first_name_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.name,expression:"updateObject.name"}],attrs:{type:"text",id:"registration-name",name:"name",placeholder:""},domProps:{value:e.updateObject.name},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"name",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.name"),expression:"errors.first('settings.name')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.name")))])]),a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-last-name"}},[e._v(e._s(e.t("last_name_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.surname,expression:"updateObject.surname"}],attrs:{type:"text",id:"registration-last-name",name:"lastName",placeholder:""},domProps:{value:e.updateObject.surname},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"surname",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.lastName"),expression:"errors.first('settings.lastName')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.lastName")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-email"}},[e._v(e._s(e.t("email_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:e.updateObject.email,expression:"updateObject.email"}],attrs:{type:"text",name:"email",id:"registration-email",placeholder:"",disabled:""},domProps:{value:e.updateObject.email},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"email",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.email"),expression:"errors.first('settings.email')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.email")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-phone"}},[e._v(e._s(e.t("mobile_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.mobile,expression:"updateObject.mobile"}],attrs:{type:"text",id:"registration-phone",name:"phone",placeholder:""},domProps:{value:e.updateObject.mobile},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"mobile",t.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.phone"),expression:"errors.first('settings.phone')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.phone")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("birth_date_placeholder"))+"*")]),a("div",{staticClass:"combo-fields"},[a("custom-select",{staticClass:"b-date-field",attrs:{items:e.updateObject.day.options,value:e.birthDate.day,placeholder:e.updateObject.day.placeholder,name:"day"},on:{change:e.onSelectAction}}),a("custom-select",{staticClass:"b-date-field",attrs:{items:e.updateObject.month.options,value:e.birthDate.month,placeholder:e.updateObject.month.placeholder,name:"month"},on:{change:e.onSelectAction}}),a("custom-select",{staticClass:"b-date-field",attrs:{items:e.updateObject.year.options,value:e.birthDate.year,placeholder:e.updateObject.year.placeholder,name:"year"},on:{change:e.onSelectAction}})],1)]),a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("gender_placeholder"))+"*")]),a("div",{staticClass:"combo-fields columns"},[a("custom-select",{staticClass:"gender-field",attrs:{items:e.updateObject.gender.options,name:"gender",value:e.birthDate.gender,placeholder:e.updateObject.gender.placeholder},on:{change:e.onSelectAction}})],1)])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("country_placeholder"))+"*")]),a("div",{staticClass:"combo-fields columns"},[a("custom-select",{staticClass:"country-field",attrs:{name:"country",items:e.updateObject.country.options,value:e.birthDate.country,placeholder:e.updateObject.country.placeholder},on:{change:e.onSelectAction}})],1)]),a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("city_placeholder"))+"*")]),a("div",{staticClass:"combo-fields columns"},[a("custom-select",{staticClass:"city-field",attrs:{name:"city",items:e.updateObject.city.options,value:e.birthDate.city,placeholder:e.updateObject.city.placeholder},on:{change:e.onSelectAction}})],1)])]),a("div",{staticClass:"field-container columns"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("terms"),expression:"errors.first('terms')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.terms"))+"\n      ")])]),a("div",{staticClass:"field-container centered-content"},[a("div",{staticClass:"register-button-container"},[a("button-standard",{attrs:{text:e.t("save")},on:{click:e.updateSettings}})],1)])]):e._e(),e.user?a("form",{staticClass:"change-password-form",attrs:{"data-vv-scope":"changePassword"},on:{submit:function(t){return t.preventDefault(),e.updatePassword(t)}}},[a("block-header-standard",{staticClass:"small-margins",attrs:{title:e.t("changePassword")}}),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"current-password"}},[e._v(e._s(e.t("reg_password_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{type:"password",id:"current-password",name:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("changePassword.password"),expression:"errors.first('changePassword.password')"}],staticClass:"error"},[e._v(e._s(e.errors.first("changePassword.password")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-password"}},[e._v(e._s(e.t("newPassword"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.newPassword,expression:"user.newPassword"}],ref:"newPassword",attrs:{type:"password",id:"registration-password",name:"newPassword"},domProps:{value:e.user.newPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"newPassword",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("changePassword.newPassword"),expression:"errors.first('changePassword.newPassword')"}],staticClass:"error"},[e._v(e._s(e.errors.first("changePassword.newPassword")))])]),a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-repeat-password"}},[e._v(e._s(e.t("repeatNewPassword"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"confirmed:newPassword",expression:"'confirmed:newPassword'"},{name:"model",rawName:"v-model",value:e.user.repeatPassword,expression:"user.repeatPassword"}],attrs:{name:"password_confirmation",type:"password",id:"registration-repeat-password"},domProps:{value:e.user.repeatPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"repeatPassword",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("changePassword.password_confirmation"),expression:"errors.first('changePassword.password_confirmation')"}],staticClass:"error"},[e._v(e._s(e.errors.first("changePassword.password_confirmation")))])])]),a("div",{staticClass:"field-container centered-content"},[a("div",{staticClass:"register-button-container"},[a("button-standard",{attrs:{text:e.t("change")},on:{click:e.updatePassword}})],1)])],1):e._e()],1)},l=[],d=(a("7f7f"),a("6b54"),a("9323")),c=a("bebe"),u=a("e9ed"),p={name:"settings-form",components:{BlockHeaderStandard:i["a"],WhiteSpinner:u["a"],ButtonStandard:c["a"],CustomSelect:d["a"]},mounted:function(){if(this.$store.getters.user){var e=new Date(this.user.birthDate);this.birthDate.day=e.getDate().toString(),this.birthDate.month=e.getMonth().toString(),this.birthDate.year=e.getFullYear().toString(),this.birthDate.gender=this.user.sex,this.birthDate.city=this.user.city,this.birthDate.country=this.user.country,console.log(this.birthDate)}},data:function(){return{user:this.$store.getters.user,updateObject:{name:this.$store.getters.user.name,surname:this.$store.getters.user.surname,email:this.$store.getters.user.email,mobile:this.$store.getters.user.mobile,city:{val:this.$store.getters.user.city,errors:[],options:[{name:{ka:"თბილისი",en:"Tbilisi"},value:"tbilisi"},{name:{ka:"ბათუმი",en:"Batumi"},value:"batumi"}],placeholder:{en:"City",ka:"ქალაქი"}},country:{val:this.$store.getters.user.country,errors:[],options:[{name:{ka:"საქართველო",en:"Georgia"},value:"georgia"},{name:{ka:"რუსეთი",en:"Russia"},value:"russia"}],placeholder:{en:"Country",ka:"ქვეყანა"}},gender:{val:this.$store.getters.user.sex,errors:[],options:[{name:{ka:"ქალი",en:"Female"},value:"female"},{name:{ka:"კაცი",en:"Male"},value:"male"}],placeholder:{en:"Gender",ka:"სქესი"}},day:{val:"",errors:[],options:this.$store.state.dateOptions.day.options,placeholder:{en:"Day",ka:"დღე"}},month:{val:"",errors:[],options:this.$store.state.dateOptions.month.options,placeholder:{en:"Month",ka:"თვე"}},year:{val:"",errors:[],options:this.$store.state.dateOptions.year.options(),placeholder:{en:"Year",ka:"წელი"}}},loading:!1,returnedError:"",birthDate:{day:"",month:"",year:"",country:"",gender:"",city:""}}},methods:{updateSettings:function(){var e=this;this.validateForm()&&(console.log(this.user),this.$validator.validateAll("settings").then(function(t){t&&(e.user.birthDate=[e.birthDate.year,e.birthDate.month,e.birthDate.day].join("/"),e.user.sex=e.updateObject.gender.val,e.user.city=e.updateObject.city.val,e.user.country=e.updateObject.country.val,e.loading=!0,e.$http.post(e.$store.state.apiUrls.updateUser,e.user).then(function(t){e.$store.dispatch("getUser",{token:e.user.token,email:e.user.email}).then(function(e){console.log(e)}).catch(function(e){console.error(e)}),e.$store.dispatch("showPopup",{message:e.t("updated_successfully"),icon:"success"}),e.loading=!1}).catch(function(e){console.error(e)}))}).catch(function(e){console.log(e)}))},updatePassword:function(){var e=this;this.validateForm()&&this.$validator.validateAll("changePassword").then(function(t){t&&(e.loading=!0,e.$store.dispatch("updatePassword",e.user).then(function(){e.$store.dispatch("showPopup",{message:e.t("changed"),icon:"success"}),e.loading=!1}).catch(function(t){t.response.data&&(e.returnedError=t.response.data.status),e.loading=!1}))}).catch(function(e){console.log(e)})},validateForm:function(){return!0},onSelectAction:function(e){e.selected?this.updateObject.hasOwnProperty(e.name)&&this.updateObject[e.name].hasOwnProperty("val")?this.updateObject[e.name].val=e.selected.value:this.birthDate.hasOwnProperty(e.name)&&this.birthDate[e.name].hasOwnProperty("val")&&(this.birthDate[e.name]=e.selected.value):this.updateObject.hasOwnProperty(e.name)&&this.updateObject[e.name].hasOwnProperty("val")?this.updateObject[e.name].val="":this.birthDate.hasOwnProperty(e.name)&&this.birthDate[e.name].hasOwnProperty("val")&&(this.birthDate[e.name].val="")}}},m=p,v=(a("c48c"),a("2877")),h=Object(v["a"])(m,n,l,!1,null,null,null);h.options.__file="SettingsForm.vue";var w=h.exports,g={name:"registration-page",components:{SettingsForm:w,RegistrationForm:o["a"],BlockHeaderStandard:i["a"]}},f=g,b=(a("e1c8"),Object(v["a"])(f,s,r,!1,null,null,null));b.options.__file="Settings.vue";t["default"]=b.exports},"964b":function(e,t,a){},c48c:function(e,t,a){"use strict";var s=a("964b"),r=a.n(s);r.a},e1c8:function(e,t,a){"use strict";var s=a("0c71"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-5a12d480.4ecd0ccd.js.map