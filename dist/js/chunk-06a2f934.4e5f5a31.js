(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06a2f934"],{"0c71":function(e,t,a){},"26d3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"settings-page"}},[a("div",{staticClass:"settings-page-container"},[a("block-header-standard",{attrs:{title:e.t("settings")}}),a("div",{staticClass:"settings-form-container"},[a("settings-form")],1)],1)])},s=[],i=a("1d62"),n=a("087b"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"settings-form"}},[e.loading?a("white-spinner"):e._e(),e.user?a("form",{attrs:{"data-vv-scope":"settings"},on:{submit:function(t){return t.preventDefault(),e.updateSettings(t)}}},[e.returnedError.length?a("div",{staticClass:"registration-error"},[a("div",{staticClass:"error"},[a("span",[e._v(e._s(e.returnedError))])])]):e._e(),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-name"}},[e._v(e._s(e.t("first_name_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.name,expression:"updateObject.name"}],attrs:{type:"text",id:"registration-name",name:"name",placeholder:""},domProps:{value:e.updateObject.name},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"name",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.name"),expression:"errors.first('settings.name')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.name")))])]),a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-last-name"}},[e._v(e._s(e.t("last_name_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.surname,expression:"updateObject.surname"}],attrs:{type:"text",id:"registration-last-name",name:"lastName",placeholder:""},domProps:{value:e.updateObject.surname},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"surname",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.lastName"),expression:"errors.first('settings.lastName')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.lastName")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-email"}},[e._v(e._s(e.t("email_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:e.updateObject.email,expression:"updateObject.email"}],attrs:{type:"text",name:"email",id:"registration-email",placeholder:"",disabled:""},domProps:{value:e.updateObject.email},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"email",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.email"),expression:"errors.first('settings.email')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.email")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-phone"}},[e._v(e._s(e.t("mobile_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.mobile,expression:"updateObject.mobile"}],attrs:{type:"text",id:"registration-phone",name:"phone",placeholder:""},domProps:{value:e.updateObject.mobile},on:{input:function(t){t.target.composing||e.$set(e.updateObject,"mobile",t.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.phone"),expression:"errors.first('settings.phone')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.phone")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("birth_date_placeholder"))+"*")]),a("div",{staticClass:"combo-fields"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.birthDate.day,expression:"birthDate.day"}],attrs:{type:"hidden",name:"day"},domProps:{value:e.birthDate.day},on:{input:function(t){t.target.composing||e.$set(e.birthDate,"day",t.target.value)}}}),a("custom-select",{staticClass:"b-date-field",attrs:{items:e.updateObject.day.options,selectedDefault:e.day,placeholder:e.updateObject.day.placeholder,name:"day"},on:{change:e.onSelectAction}}),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.birthDate.month,expression:"birthDate.month"}],attrs:{type:"hidden",name:"month"},domProps:{value:e.birthDate.month},on:{input:function(t){t.target.composing||e.$set(e.birthDate,"month",t.target.value)}}}),a("custom-select",{staticClass:"b-date-field",attrs:{items:e.updateObject.month.options,selectedDefault:e.month,placeholder:e.updateObject.month.placeholder,name:"month"},on:{change:e.onSelectAction}}),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.birthDate.year,expression:"birthDate.year"}],attrs:{type:"hidden",name:"year"},domProps:{value:e.birthDate.year},on:{input:function(t){t.target.composing||e.$set(e.birthDate,"year",t.target.value)}}}),a("custom-select",{staticClass:"b-date-field",attrs:{items:e.updateObject.year.options,selectedDefault:e.year,placeholder:e.updateObject.year.placeholder,name:"year"},on:{change:e.onSelectAction}})],1),e.errors.first("day")?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("day"),expression:"errors.first('day')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.day")))])]):e.errors.first("month")?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("month"),expression:"errors.first('month')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.month")))])]):e.errors.first("year")?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("year"),expression:"errors.first('year')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.year")))])]):e._e()]),a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("gender_placeholder"))+"*")]),a("div",{staticClass:"combo-fields columns"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.sex,expression:"user.sex"}],attrs:{type:"hidden",name:"gender"},domProps:{value:e.user.sex},on:{input:function(t){t.target.composing||e.$set(e.user,"sex",t.target.value)}}}),a("custom-select",{staticClass:"gender-field",attrs:{items:e.updateObject.gender.options,name:"gender",selectedDefault:e.gender,placeholder:e.updateObject.gender.placeholder},on:{change:e.onSelectAction}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.gender"),expression:"errors.first('settings.gender')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.gender")))])],1)])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("country_placeholder"))+"*")]),a("div",{staticClass:"combo-fields columns"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.country.val,expression:"updateObject.country.val"}],attrs:{type:"hidden",name:"country"},domProps:{value:e.updateObject.country.val},on:{input:function(t){t.target.composing||e.$set(e.updateObject.country,"val",t.target.value)}}}),a("custom-select",{staticClass:"country-field",attrs:{name:"country",items:e.updateObject.country.options,selectedDefault:e.updateObject.country.options[0],placeholder:e.updateObject.country.placeholder},on:{change:e.onSelectAction}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.country"),expression:"errors.first('settings.country')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.country")))])],1)]),a("div",{staticClass:"field-wrapper"},[a("label",[e._v(e._s(e.t("city_placeholder"))+"*")]),a("div",{staticClass:"combo-fields columns"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.updateObject.city.val,expression:"updateObject.city.val"}],attrs:{type:"hidden",name:"city"},domProps:{value:e.updateObject.city.val},on:{input:function(t){t.target.composing||e.$set(e.updateObject.city,"val",t.target.value)}}}),a("custom-select",{staticClass:"city-field",attrs:{name:"city",items:e.updateObject.city.options,selectedDefault:e.updateObject.city.options[0],placeholder:e.updateObject.city.placeholder},on:{change:e.onSelectAction}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("settings.city"),expression:"errors.first('settings.city')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.city")))])],1)])]),a("div",{staticClass:"field-container columns"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("terms"),expression:"errors.first('terms')"}],staticClass:"error"},[e._v(e._s(e.errors.first("settings.terms"))+"\n      ")])]),a("div",{staticClass:"field-container centered-content"},[a("div",{staticClass:"register-button-container"},[a("button-standard",{attrs:{text:e.t("save")},on:{click:e.updateSettings}})],1)])]):e._e(),e.user?a("form",{staticClass:"change-password-form",attrs:{"data-vv-scope":"changePassword"},on:{submit:function(t){return t.preventDefault(),e.updatePassword(t)}}},[a("block-header-standard",{staticClass:"small-margins",attrs:{title:e.t("changePassword")}}),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"current-password"}},[e._v(e._s(e.t("reg_password_placeholder"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],ref:"password",attrs:{type:"password",id:"current-password",name:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("changePassword.password"),expression:"errors.first('changePassword.password')"}],staticClass:"error"},[e._v(e._s(e.errors.first("changePassword.password")))])])]),a("div",{staticClass:"field-container"},[a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-password"}},[e._v(e._s(e.t("newPassword"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.user.newPassword,expression:"user.newPassword"}],ref:"newPassword",attrs:{type:"password",id:"registration-password",name:"newPassword"},domProps:{value:e.user.newPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"newPassword",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("changePassword.newPassword"),expression:"errors.first('changePassword.newPassword')"}],staticClass:"error"},[e._v(e._s(e.errors.first("changePassword.newPassword")))])]),a("div",{staticClass:"field-wrapper"},[a("label",{attrs:{for:"registration-repeat-password"}},[e._v(e._s(e.t("repeatNewPassword"))+"*")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"confirmed:newPassword",expression:"'confirmed:newPassword'"},{name:"model",rawName:"v-model",value:e.user.repeatPassword,expression:"user.repeatPassword"}],attrs:{name:"password_confirmation",type:"password",id:"registration-repeat-password"},domProps:{value:e.user.repeatPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"repeatPassword",t.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.first("changePassword.password_confirmation"),expression:"errors.first('changePassword.password_confirmation')"}],staticClass:"error"},[e._v(e._s(e.errors.first("changePassword.password_confirmation")))])])]),a("div",{staticClass:"field-container centered-content"},[a("div",{staticClass:"register-button-container"},[a("button-standard",{attrs:{text:e.t("change")},on:{click:e.updatePassword}})],1)])],1):e._e()],1)},l=[],d=(a("6b54"),a("7f7f"),a("9323")),c=a("bebe"),u=a("e9ed"),p={name:"settings-form",components:{BlockHeaderStandard:i["a"],WhiteSpinner:u["a"],ButtonStandard:c["a"],CustomSelect:d["a"]},data:function(){return{user:this.$store.getters.user,updateObject:{name:this.$store.getters.user.name,surname:this.$store.getters.user.surname,email:this.$store.getters.user.email,mobile:this.$store.getters.user.mobile,city:{val:this.$store.getters.user.city,errors:[],options:[{name:{ka:"თბილისი",en:"Tbilisi"},value:"tbilisi"},{name:{ka:"ბათუმი",en:"Batumi"},value:"batumi"}],placeholder:{en:"City",ka:"ქალაქი"}},country:{val:this.$store.getters.user.country,errors:[],options:[{name:{ka:"საქართველო",en:"Georgia"},value:"georgia"},{name:{ka:"რუსეთი",en:"Russia"},value:"russia"}],placeholder:{en:"Country",ka:"ქვეყანა"}},gender:{val:this.$store.getters.user.sex,errors:[],options:[{name:{ka:"ქალი",en:"Female"},value:"female"},{name:{ka:"კაცი",en:"Male"},value:"male"}],placeholder:{en:"Gender",ka:"სქესი"}},day:{val:"",errors:[],options:this.$store.state.dateOptions.day.options,placeholder:{en:"Day",ka:"დღე"}},month:{val:"",errors:[],options:this.$store.state.dateOptions.month.options,placeholder:{en:"Month",ka:"თვე"}},year:{val:"",errors:[],options:this.$store.state.dateOptions.year.options(),placeholder:{en:"Year",ka:"წელი"}}},loading:!1,returnedError:"",birthDate:{day:"",month:"",year:""}}},methods:{updateSettings:function(){var e=this;this.validateForm()&&this.$validator.validateAll("settings").then(function(t){t&&(e.user.birthDate=[e.birthDate.year,e.birthDate.month,e.birthDate.day].join("/"),e.user.sex=e.updateObject.gender.val,e.user.city=e.updateObject.city.val,e.user.country=e.updateObject.country.val,e.loading=!0,e.$http.post(e.$store.state.apiUrls.updateUser,e.user).then(function(t){e.$store.dispatch("getUser",{token:e.user.token,email:e.user.email}).then(function(e){console.log(e)}).catch(function(e){console.error(e)}),e.$store.dispatch("showPopup",{message:e.t("updated_successfully"),icon:"success"}),e.loading=!1}).catch(function(e){console.error(e)}))}).catch(function(e){console.log(e)})},updatePassword:function(){var e=this;this.validateForm()&&this.$validator.validateAll("changePassword").then(function(t){t&&(e.loading=!0,e.$store.dispatch("register",e.user).then(function(){e.loading=!1,e.$router.push({name:"home",params:{locale:e.locale}})}).catch(function(t){t.response.data&&(e.returnedError=t.response.data.status),e.loading=!1}))}).catch(function(e){console.log(e)})},validateForm:function(){return!0},onSelectAction:function(e){e.selected?this.updateObject.hasOwnProperty(e.name)&&this.updateObject[e.name].hasOwnProperty("val")?this.updateObject[e.name].val=e.selected.value:this.birthDate.hasOwnProperty(e.name)&&this.birthDate[e.name].hasOwnProperty("val")&&(this.birthDate[e.name]=e.selected.value):this.updateObject.hasOwnProperty(e.name)&&this.updateObject[e.name].hasOwnProperty("val")?this.updateObject[e.name].val="":this.birthDate.hasOwnProperty(e.name)&&this.birthDate[e.name].hasOwnProperty("val")&&(this.birthDate[e.name].val="")}},computed:{day:function(){var e=new Date(this.user.birthDate),t=e.getDate().toString(),a=this.updateObject.day.options.filter(function(e){if(e&&e.value===t)return e});return a.length?a[0]:""},month:function(){var e=new Date(this.user.birthDate),t=e.getMonth().toString(),a=this.updateObject.month.options.filter(function(e){if(e&&e.value===t)return e});return a.length?a[0]:""},year:function(){var e=new Date(this.user.birthDate),t=e.getFullYear().toString(),a=this.updateObject.year.options.filter(function(e){if(e&&e.value===t)return e});return a.length?a[0]:""},gender:function(){var e=this.user.sex,t=this.updateObject.gender.options.filter(function(t){if(t&&t.value===e)return t});return t.length?t[0]:""},city:function(){var e=this.user.sex,t=this.updateObject.city.options.filter(function(t){if(t&&t.value===e)return t});return t.length?t[0]:""},country:function(){var e=this.user.sex,t=this.updateObject.country.options.filter(function(t){if(t&&t.value===e)return t});return t.length?t[0]:""}}},m=p,v=(a("c48c"),a("2877")),h=Object(v["a"])(m,o,l,!1,null,null,null);h.options.__file="SettingsForm.vue";var f=h.exports,g={name:"registration-page",components:{SettingsForm:f,RegistrationForm:n["a"],BlockHeaderStandard:i["a"]}},w=g,b=(a("e1c8"),Object(v["a"])(w,r,s,!1,null,null,null));b.options.__file="Settings.vue";t["default"]=b.exports},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(e,t,a){"use strict";a("3846");var r=a("cb7c"),s=a("0bfb"),i=a("9e1e"),n="toString",o=/./[n],l=function(e){a("2aba")(RegExp.prototype,n,e,!0)};a("79e5")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?l(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?s.call(e):void 0)}):o.name!=n&&l(function(){return o.call(this)})},"964b":function(e,t,a){},c48c:function(e,t,a){"use strict";var r=a("964b"),s=a.n(r);s.a},e1c8:function(e,t,a){"use strict";var r=a("0c71"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-06a2f934.4e5f5a31.js.map